{"version":3,"sources":["Components/List.component.ts"],"names":[],"mappings":"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","file":"Components/List.component.js","sourcesContent":["import {Component, OnInit, ElementRef, Input, Output, EventEmitter} from 'angular2/core';\nimport {ROUTER_DIRECTIVES, Location} from 'angular2/router'\nimport {Pagination} from './pagination.component'\n\n@Component({\n    selector: 'list',\n    templateUrl: '/html/Components/List.component.html',\n    directives: [ROUTER_DIRECTIVES, Pagination],\n    providers: [Location]\n})\nexport class ListComponent {\n\n    @Input()\n    title: string\n\n    @Input()\n    columns: ListColumn[]\n\n    @Input()\n    source: any[]\n\n    @Input()\n    paging: PagingConfig\n\n    @Output()\n    refreshData = new EventEmitter<RefreshInfo>()\n\n    @Input()\n    configMode = false;\n\n    @Output()\n    configModeChange = new EventEmitter<boolean>()\n\n    sortKey: string\n    sortAsc: boolean\n\n\n    sortClick(key: string) {\n\n        if (this.sortKey != key) {\n            this.sortKey = key\n            return\n        }\n\n        if (this.sortAsc == null || this.sortAsc == undefined)\n            this.sortAsc = false\n        else if (this.sortAsc === false)\n            this.sortAsc = true\n        else if (this.sortAsc === true)\n            this.sortAsc = null\n\n\n        console.log(key, this.sortAsc)\n\n        this.pageChanged()\n    }\n\n    pageChanged() {\n        this.refreshData.emit({\n            Skip: this.paging.ActivePage * this.paging.ItemsPerPage,\n            Take: this.paging.ItemsPerPage,\n            SortKey: this.sortKey,\n            SortAsc: this.sortAsc\n        })\n    }\n\n    @Input()\n    id: string;\n\n\n    constructor(\n        private _element: ElementRef,\n        private _location: Location) {\n    }\n\n    ngOnInit() {\n        var columns = JSON.parse(localStorage.getItem(this._location.path() + '#' + this.id));\n\n        if (columns)\n            for (var i = 0; i < this.columns.length; i++)\n                this.columns[i].IsVisible = columns[this.columns[i].Key];\n\n        this.configModeChange.emit(this.configMode)\n    }\n\n    showHideColumns() {\n        if (this.configMode) {\r\n            var columns = {};\r\n\r\n            for (var i = 0; i < this.columns.length; i++)\r\n                columns[this.columns[i].Key] = this.columns[i].IsVisible || false;\r\n\r\n            localStorage.setItem(this._location.path() + '#' + this.id, JSON.stringify(columns));\n        }\n\n        this.configMode = !this.configMode;\n        this.configModeChange.emit(this.configMode)\n    }\n}\n\nexport interface PagingConfig {\n    ItemsPerPage: number\n    ActivePage: number\n    TotalItemsCount: number\n}\n\nexport interface RefreshInfo {\n    Skip: number\n    Take: number\n    SortKey?: string\n    SortAsc?: boolean\n}\n\n\nexport interface ListColumn {\n    Key: string\n    Name?: string\n    Sorting?: boolean\n    LinkRoute?: string[]\n    LinkItemKey?: string\n    IsVisible?: boolean\n}"],"sourceRoot":"/Source"}