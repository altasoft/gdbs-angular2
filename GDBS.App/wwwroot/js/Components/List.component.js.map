{"version":3,"sources":["Components/List.component.ts"],"names":[],"mappings":"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","file":"Components/List.component.js","sourcesContent":["import {Component, OnInit, ElementRef, Input, Output, EventEmitter} from 'angular2/core';\r\nimport {ROUTER_DIRECTIVES, Location} from 'angular2/router'\r\nimport {Pagination} from './pagination.component'\r\n\r\n@Component({\r\n    selector: 'list',\r\n    templateUrl: '/html/Components/List.component.html',\r\n    directives: [ROUTER_DIRECTIVES, Pagination],\r\n    providers: [Location]\r\n})\r\nexport class ListComponent {\r\n\r\n    @Input()\r\n    title: string\r\n\r\n    @Input()\r\n    columns: ListColumn[]\r\n\r\n    @Input()\r\n    source: any[]\r\n\r\n    @Input()\r\n    paging: PagingConfig\r\n\r\n    @Output()\r\n    refreshData = new EventEmitter<RefreshInfo>()\r\n\r\n    @Input()\r\n    configMode = false;\r\n\r\n    @Output()\r\n    configModeChange = new EventEmitter<boolean>()\r\n\r\n    sortKey: string\r\n    sortAsc: boolean\r\n\r\n\r\n    sortClick(key: string) {\r\n\r\n        if (this.sortKey != key) {\r\n            this.sortKey = key\r\n            return\r\n        }\r\n\r\n        if (this.sortAsc == null || this.sortAsc == undefined)\r\n            this.sortAsc = false\r\n        else if (this.sortAsc === false)\r\n            this.sortAsc = true\r\n        else if (this.sortAsc === true)\r\n            this.sortAsc = null\r\n\r\n\r\n        console.log(key, this.sortAsc)\r\n\r\n        this.pageChanged()\r\n    }\r\n\r\n    pageChanged() {\r\n        this.refreshData.emit({\r\n            Skip: this.paging.ActivePage * this.paging.ItemsPerPage,\r\n            Take: this.paging.ItemsPerPage,\r\n            SortKey: this.sortKey,\r\n            SortAsc: this.sortAsc\r\n        })\r\n    }\r\n\r\n    @Input()\r\n    id: string;\r\n\r\n\r\n    constructor(\r\n        private _element: ElementRef,\r\n        private _location: Location) {\r\n    }\r\n\r\n    ngOnInit() {\r\n        var columns = JSON.parse(localStorage.getItem(this._location.path() + '#' + this.id));\r\n\r\n        if (columns)\r\n            for (var i = 0; i < this.columns.length; i++)\r\n                this.columns[i].IsVisible = columns[this.columns[i].Key];\r\n\r\n        this.configModeChange.emit(this.configMode)\r\n    }\r\n\r\n    showHideColumns() {\r\n        if (this.configMode) {\r\n            var columns = {};\r\n\r\n            for (var i = 0; i < this.columns.length; i++)\r\n                columns[this.columns[i].Key] = this.columns[i].IsVisible || false;\r\n\r\n            localStorage.setItem(this._location.path() + '#' + this.id, JSON.stringify(columns));\r\n        }\r\n\r\n        this.configMode = !this.configMode;\r\n        this.configModeChange.emit(this.configMode)\r\n    }\r\n}\r\n\r\nexport interface PagingConfig {\r\n    ItemsPerPage: number\r\n    ActivePage: number\r\n    TotalItemsCount: number\r\n}\r\n\r\nexport interface RefreshInfo {\r\n    Skip: number\r\n    Take: number\r\n    SortKey?: string\r\n    SortAsc?: boolean\r\n}\r\n\r\n\r\nexport interface ListColumn {\r\n    Key: string\r\n    Name?: string\r\n    Sorting?: boolean\r\n    LinkRoute?: string[]\r\n    LinkItemKey?: string\r\n    IsVisible?: boolean\r\n}"],"sourceRoot":"/Source"}